
\documentclass{standalone}
\usepackage{tikz,pgfplots}
\begin{document}
\tdplotsetmaincoords{60}{110}

%define polar coordinates for some vector
%TODO: look into using 3d spherical coordinate system
\pgfmathsetmacro{\rvec}{.8}
\pgfmathsetmacro{\thetavec}{30}
\pgfmathsetmacro{\phivec}{60}

	\begin{tikzpicture}[scale=5,tdplot_main_coords]
		
		%set up some coordinates 
		%-----------------------
		\coordinate (O) at (0,0,0);
		
		%determine a coordinate (P) using (r,\theta,\phi) coordinates.  This command
		%also determines (Pxy), (Pxz), and (Pyz): the xy-, xz-, and yz-projections
		%of the point (P).
		%syntax: \tdplotsetcoord{Coordinate name without parentheses}{r}{\theta}{\phi}
		\tdplotsetcoord{P}{\rvec}{\thetavec}{\phivec}
		
		%draw figure contents
		%--------------------
		
		%draw the main coordinate system axes
		\draw[thick,->] (0,0,0) -- (1,0,0) node[anchor=north east]{};
		\draw[thick,->] (0,0,0) -- (0,1,0) node[anchor=north west]{};
		\draw[thick,->] (0,0,0) -- (0,0,1) node[anchor=south]{$\text{span}(\mathbf{X}^{\perp})$};
		
		%draw a vector from origin to point (P) 
		\draw[-stealth,color=black] (O) -- (P)node[right]{$\mathbf{y}$};
		
		%draw projection on xy plane, and a connecting line
		\draw[fill = gray, opacity = 0.3] (0,0,0)--(1,0,0)--(1,1,0)--(0,1,0)--cycle;
		\draw (0.7,0.7, 0) node {$\text{span}(\mathbf{X})$};
		\draw[dashed, color=black] (O) -- (Pxy)node[right]{$\hat{\mathbf{y}}$};
		\draw[dashed, color=black] (P) -- (Pxy)node[midway, right]{$\mathbf{e}$};
	\end{tikzpicture}
\end{document}